-- Utilizado MySQL

CREATE DATABASE IF NOT exists PATRIMONIO_NATURAL;
use PATRIMONIO_NATURAL;

-- CREACION DE TABLAS

/*Se desactivan las resticciones para que no causen problemas a la hora de crear tablas e introducir datos */
SET FOREIGN_KEY_CHECKS = 0;

CREATE TABLE `VISITANTE`(
`DNI` VARCHAR(25),
`NOMBRE` VARCHAR(25),
`DOMICILIO` VARCHAR(25),
`PROFESION` VARCHAR(25));

/*Indices para la tabla Visitante */
ALTER TABLE `VISITANTE`
ADD PRIMARY KEY (`DNI`),
ADD KEY(`DNI`);

/*Se establece DNI como no null para la tabla Visitante */
ALTER TABLE `VISITANTE`
MODIFY `DNI` VARCHAR(25) NOT NULL;

CREATE TABLE `EXCURSION`(
`CODEXCURSION` INT(15) ,
`FECHA` DATE,
`HORA` TIME,
`APIE` CHAR(2),
`CODALOJAMIENTO` INT(15));


/*Indices para la tabla Excursion */
ALTER TABLE `EXCURSION`
ADD PRIMARY KEY (`CODEXCURSION`),
ADD KEY (`CODEXCURSION`);

/*Se establece CodExcursion como no null para la tabla Visitante */
ALTER TABLE `EXCURSION`
MODIFY `CODEXCURSION` INT(15) NOT NULL;

CREATE TABLE `E_V`(
`CODEXCURSION` INT(15),
`DNI` VARCHAR(25));

/*Indices y filtros para la tabla E_V */
ALTER TABLE `E_V`
ADD KEY (`CODEXCURSION`),
ADD CONSTRAINT e_v_ibf_k1 FOREIGN KEY (`CODEXCURSION`) REFERENCES `EXCURSION`(`CODEXCURSION`) ON DELETE NO ACTION ON UPDATE NO ACTION,
ADD KEY(`DNI`),
ADD CONSTRAINT e_v_ibf_k2 FOREIGN KEY (`DNI`) REFERENCES `VISITANTE`(`DNI`) ON DELETE NO ACTION ON UPDATE NO ACTION;

CREATE TABLE `ALOJAMIENTO`(
`CODALOJAMIENTO` INT(15) ,
`CATEGORIA` VARCHAR(25),
`CAPACIDAD` INT(15),
`CODPN` INT(15));

/*Indices para la tabla Alojamiento */
ALTER TABLE `ALOJAMIENTO`
ADD PRIMARY KEY (`CODALOJAMIENTO`),
ADD KEY (`CODALOJAMIENTO`);

/*Se establece CodAlojamiento como no null para la tabla Alojamiento */
ALTER TABLE `ALOJAMIENTO`
MODIFY `CODALOJAMIENTO` INT(15) NOT NULL;

/*Filtros para la tabla Excursión. Se realiza una vez creada la tabla Alojamiento. */
ALTER TABLE `EXCURSION`
ADD CONSTRAINT excursion_ibf_k1 FOREIGN KEY (`CODALOJAMIENTO`) REFERENCES `ALOJAMIENTO`(`CODALOJAMIENTO`) ON DELETE NO ACTION ON UPDATE NO ACTION;

CREATE TABLE `COMUNIDADAUTONOMA`(
`CODCA` INT(15),
`NOMBRE` VARCHAR(25),
`ORGRESPONSABLE` VARCHAR(25));

/*Indices para la tabla ComunidadAutonoma */
ALTER TABLE `COMUNIDADAUTONOMA`
ADD PRIMARY KEY (`CODCA`),
ADD KEY(`CODCA`);

/*Se establece CodCa como no null para la tabla ComundadAutonoma */
ALTER TABLE `COMUNIDADAUTONOMA`
MODIFY `CODCA` INT(15) NOT NULL;

CREATE TABLE `A_V`(
`CODALOJAMIENTO` INT(15),
`DNI` VARCHAR(25),
`FECHAINICIO` DATE,
`FECHAFIN`DATE);

/*Indices y filtros para la tabla A_V */
ALTER TABLE `A_V`
ADD KEY (`CODALOJAMIENTO`),
ADD CONSTRAINT a_v_ibf_k1 FOREIGN KEY (`CODALOJAMIENTO`) REFERENCES `ALOJAMIENTO`(`CODALOJAMIENTO`) ON DELETE NO ACTION ON UPDATE NO ACTION,
ADD KEY(`DNI`),
ADD CONSTRAINT a_v_ibf_k2 FOREIGN KEY (`DNI`) REFERENCES `VISITANTE`(`DNI`) ON DELETE NO ACTION ON UPDATE NO ACTION,
ADD PRIMARY KEY (`FECHAINICIO`),
ADD KEY (`FECHAINICIO`);

CREATE TABLE `ENTRADA`(
`CODENTRADA` INT(15) ,
`CODPN` INT(15));

/*Indices para la tabla Entrada */
ALTER TABLE `ENTRADA`
ADD PRIMARY KEY (`CODENTRADA`),
ADD KEY (`CODENTRADA`);

/*Se establece CodEntrada como no null para la tabla Entrada */
ALTER TABLE `ENTRADA`
MODIFY `CODENTRADA` INT(15)  NOT NULL;

CREATE TABLE `PARQUENATURAL`(
`CODPN` INT(15),
`NOMBRE` VARCHAR(25),
`FECHADECLARACION` DATE);

/*Indices para la tabla ParqueNatural */
ALTER TABLE `PARQUENATURAL`
ADD PRIMARY KEY (`CODPN`),
ADD KEY(`CODPN`);

/*Se establece CodPn como no null para la tabla ParqueNatural */
ALTER TABLE `PARQUENATURAL`
MODIFY `CODPN` INT(15)  NOT NULL;

/*Existen algunos Alter Table que debido a que las FK se relacionan con tablas que aún no estaban creadas, no se pueden realizar 
inmediatamente tras su tabla, se han de hacer una vez realizada la tabla con la que tendrán esa relación*/

/*Filtros para la tabla Alojamiento */
ALTER TABLE `ALOJAMIENTO`
ADD CONSTRAINT alojamiento_ibf_k1 FOREIGN KEY (`CODPN` ) REFERENCES `PARQUENATURAL`(`CODPN` ) ON DELETE NO ACTION ON UPDATE NO ACTION;

/*Filtros para la tabla Entrada */
ALTER TABLE `ENTRADA`
ADD CONSTRAINT entrada_ibf_k1 FOREIGN KEY (`CODPN` ) REFERENCES `PARQUENATURAL`(`CODPN` ) ON DELETE NO ACTION ON UPDATE NO ACTION;

CREATE TABLE `CA_PN`(
`CODCA` INT(15),
`CODPN` INT(15),
`SUPERFICIE` INT(15));

/*Indices y filtros para la tabla CA_PN */
ALTER TABLE `CA_PN`
ADD KEY (`CODCA`),
ADD CONSTRAINT ca_pn_ibf_k1 FOREIGN KEY (`CODCA`) REFERENCES `COMUNIDADAUTONOMA`(`CODCA`) ON DELETE NO ACTION ON UPDATE NO ACTION,
ADD KEY(`CODPN`),
ADD CONSTRAINT ca_pn_ibf_k2 FOREIGN KEY (`CODPN`) REFERENCES `PARQUENATURAL`(`CODPN`) ON DELETE NO ACTION ON UPDATE NO ACTION;

CREATE TABLE `ESPECIE`(
`CODESPECIE` INT(15),
`NOMBRECIENTIFICO` VARCHAR(25),
`NOMBREVULGAR` VARCHAR(25));

/*Indices para la tabla Especie */
ALTER TABLE `ESPECIE`
ADD PRIMARY KEY (`CODESPECIE`),
ADD KEY (`CODESPECIE`);

/*Se establece CodEspecie como no null para la tabla Especie */
ALTER TABLE `ESPECIE`
MODIFY `CODESPECIE` INT(15)  NOT NULL;

CREATE TABLE `E_A`(
`CODESPECIE` INT(15),
`NOMBREA` VARCHAR(25),
`CANTIDIVIDUOS` INT(15));

/*Filtros para la tabla E_A */
ALTER TABLE `E_A`
ADD KEY (`CODESPECIE`),
ADD CONSTRAINT e_a_ibf_k1 FOREIGN KEY (`CODESPECIE`) REFERENCES `ESPECIE`(`CODESPECIE`) ON DELETE NO ACTION ON UPDATE NO ACTION;


CREATE TABLE `ANIMAL`(
`CODESPECIE` INT(15),
`ALIMENTACION` VARCHAR(25),
`PERIODOCELO` VARCHAR(25));

/*Filtros para la tabla Animal */
ALTER TABLE `ANIMAL`
ADD KEY (`CODESPECIE`),
ADD CONSTRAINT animal_ibf_k1 FOREIGN KEY (`CODESPECIE`) REFERENCES `ESPECIE`(`CODESPECIE`) ON DELETE NO ACTION ON UPDATE NO ACTION;

CREATE TABLE `VEGETAL`(
`CODESPECIE` INT(15),
`FLORACION` VARCHAR(25),
`PERIODOFLORACION` VARCHAR(25));

/*Filtros para la tabla Vegetal */
ALTER TABLE `VEGETAL`
ADD KEY (`CODESPECIE`),
ADD CONSTRAINT vegetal_ibf_k1 FOREIGN KEY (`CODESPECIE`) REFERENCES `ESPECIE`(`CODESPECIE`) ON DELETE NO ACTION ON UPDATE NO ACTION;

CREATE TABLE `MINERAL`(
`CODESPECIE` INT(15),
`TIPO` VARCHAR(25));

/*Filtros para la tabla Mineral */
ALTER TABLE `MINERAL`
ADD KEY (`CODESPECIE`),
ADD CONSTRAINT mineral_ibf_k1 FOREIGN KEY (`CODESPECIE`) REFERENCES `ESPECIE`(`CODESPECIE`) ON DELETE NO ACTION ON UPDATE NO ACTION;

CREATE TABLE `PERSONAL`(
`DNI` VARCHAR(25),
`NSS` INT(25),
`NOMBRE` VARCHAR(25),
`DIRECCION` VARCHAR(25),
`TFNODOMICILIO` INT(15),
`TFNMOVIL` INT(15),
`SUELDO` INT(15),
`CODPN` INT(15));

/*Indices y filtros para la tabla Personal */
ALTER TABLE `PERSONAL`
ADD PRIMARY KEY (`DNI`),
ADD KEY (`DNI`),
ADD UNIQUE (`NSS`),
ADD CONSTRAINT personal_ibf_k1 FOREIGN KEY (`CODPN`) REFERENCES `PARQUENATURAL`(`CODPN`) ON DELETE NO ACTION ON UPDATE NO ACTION;

/*Se establece DNI como no null para la tabla Personal */
ALTER TABLE `PERSONAL`
MODIFY `DNI` VARCHAR(25)  NOT NULL;

CREATE TABLE `CONSERVADOR`(
`DNI` VARCHAR(25),
`TAREA` VARCHAR(25),
`NOMBREA` VARCHAR(25));

/*Filtros para la tabla Conservador */
ALTER TABLE `CONSERVADOR`
ADD KEY (`DNI`),
ADD CONSTRAINT conservador_ibf_k1 FOREIGN KEY (`DNI`) REFERENCES `PERSONAL`(`DNI`) ON DELETE NO ACTION ON UPDATE NO ACTION;

CREATE TABLE `VIGILANTE`(
`DNI` VARCHAR(25),
`NOMBREA` VARCHAR(25));

/*Indices y filtros para la tabla Vigilante */
ALTER TABLE `VIGILANTE`
ADD PRIMARY KEY (`DNI`),
ADD KEY (`DNI`),
ADD UNIQUE (`DNI`),
ADD CONSTRAINT vigilante_ibf_k1 FOREIGN KEY (`DNI`) REFERENCES `PERSONAL`(`DNI`) ON DELETE NO ACTION ON UPDATE NO ACTION;

CREATE TABLE `INVESTIGADOR`(
`DNI` VARCHAR(25),
`TITULACION` VARCHAR(25));

/*Indices y filtros para la tabla Investigador */
ALTER TABLE `INVESTIGADOR`
ADD KEY (`DNI`),
ADD CONSTRAINT investigador_ibf_k1 FOREIGN KEY (`DNI`) REFERENCES `PERSONAL`(`DNI`) ON DELETE NO ACTION ON UPDATE NO ACTION;

CREATE TABLE `GESTOR`(
`DNI` VARCHAR(25),
`CODENTRADA` INT(15));

/*Indices y filtros para la tabla Gestor */
ALTER TABLE `GESTOR`
ADD KEY (`DNI`),
ADD CONSTRAINT gestor_ibf_k1 FOREIGN KEY (`DNI`) REFERENCES `PERSONAL`(`DNI`) ON DELETE NO ACTION ON UPDATE NO ACTION,
ADD CONSTRAINT gestor_ibf_k2 FOREIGN KEY (`CODENTRADA`) REFERENCES `ENTRADA`(`CODENTRADA`) ON DELETE NO ACTION ON UPDATE NO ACTION;

CREATE TABLE `AREA`(
`NOMBREA` VARCHAR(25),
`EXTENSION` INT(15),
`CODPN` INT(15));

/*Indices y filtros para la tabla Area */
ALTER TABLE `AREA`
ADD PRIMARY KEY (`NOMBREA`),
ADD KEY (`NOMBREA`),
ADD CONSTRAINT area_ibf_k1 FOREIGN KEY (`CODPN`) REFERENCES `PARQUENATURAL`(`CODPN`) ON DELETE NO ACTION ON UPDATE NO ACTION;

/*Se establece NombreA como no null para la tabla Area */
ALTER TABLE `AREA`
MODIFY `NOMBREA` VARCHAR(25)  NOT NULL;

/*Indices y filtros para la tabla E_A */
ALTER TABLE `E_A`
ADD CONSTRAINT e_a_ibf_k2 FOREIGN KEY (`NOMBREA`) REFERENCES `AREA`(`NOMBREA`) ON DELETE NO ACTION ON UPDATE NO ACTION;

/*Indices y filtros para la tabla Vigilante */
ALTER TABLE `VIGILANTE`
ADD CONSTRAINT vigilante_ibf_k2 FOREIGN KEY (`NOMBREA`) REFERENCES `AREA`(`NOMBREA`) ON DELETE NO ACTION ON UPDATE NO ACTION;

/*Indices y filtros para la tabla Conservador */
ALTER TABLE `CONSERVADOR`
ADD CONSTRAINT conservador_ibf_k2 FOREIGN KEY (`NOMBREA`) REFERENCES `AREA`(`NOMBREA`) ON DELETE NO ACTION ON UPDATE NO ACTION;

CREATE TABLE `VEHICULO`(
`MATRICULA` varchar(15),
`TIPO` VARCHAR(25),
`DNI` VARCHAR(25));

/*Indices y filtros para la tabla Vehiculo */
ALTER TABLE `VEHICULO`
ADD PRIMARY KEY (`MATRICULA`),
ADD KEY (`MATRICULA`),
ADD KEY (`DNI`),
ADD UNIQUE (`DNI`);

/*Filtros para la tabla Vehiculo */
ALTER TABLE `VEHICULO`
ADD constraint vehiculo_ibf_k1 FOREIGN KEY  (`DNI`) REFERENCES `VIGILANTE` (`DNI`);

/*Se establece Matricula como no null para la tabla Vehiculo */
ALTER TABLE `VEHICULO`
MODIFY `MATRICULA` varchar(15)  NOT NULL;



CREATE TABLE `I_P`(
`CODPROY` INT(15),
`DNI` VARCHAR(25));

/*Indices para la tabla I_P */
ALTER TABLE `I_P`
ADD KEY (`CODPROY`),
ADD KEY (`DNI`);

CREATE TABLE `PROYECTO`(
`CODPROY` INT(15),
`PRESUPUESTO` INT(15),
`FECHAINICIO` DATE,
`FECHAFIN` DATE,
`CODESPECIE` INT(15));

/*Indices para la tabla Proyecto */
ALTER TABLE `PROYECTO`
ADD PRIMARY KEY (`CODPROY`),
ADD KEY (`CODPROY`),
ADD CONSTRAINT proyecto_ibf_k1 FOREIGN KEY (`CODESPECIE`) REFERENCES `ESPECIE`(`CODESPECIE`) ON DELETE NO ACTION ON UPDATE NO ACTION;

/*Se establece Matricula como no null para la tabla Proyecto */
ALTER TABLE `PROYECTO`
MODIFY `CODPROY` INT(15)  NOT NULL;

/*Filtros para la tabla I_P */
ALTER TABLE `I_P`
ADD CONSTRAINT ip_ibf_k2 FOREIGN KEY (`CODPROY`) REFERENCES `PROYECTO`(`CODPROY`) ON DELETE NO ACTION ON UPDATE NO ACTION;





-- INTRODUCCIÓN DE DATOS EN LAS TABLAS
/*Se hace un Bulk Insert para poblar todas las tablas con datos*/

INSERT INTO `VISITANTE`(`DNI`,`NOMBRE`,`DOMICILIO`,`PROFESION`) VALUES
('56712367K','ALMUDENA','C/ TORTOSA 1','MEDICA'),
('45698610P','MANUEL','C/ AMERICA 27','MECANICO'),
('85903261Q','PABLO','C/ DEL RAYO 59','BIOLOGO'),
('67823956C','RUTH','C/ BARCELONA 92','COMERCIAL'),
('91758124R','MARTA','C/ BRUNETE 44','FISIOTERAPEUTA');


INSERT INTO `EXCURSION`(`CODEXCURSION`,`FECHA`,`HORA`,`APIE`,`CODALOJAMIENTO`) VALUES
(34567,'2022-11-25','09:10:00','SI',011),
(57849,'2020-02-11','13:22:00','NO',012),
(63892,'2023-01-07','08:03:00','SI',013),
(89506,'2018-04-20','10:22:03','SI',011),
(35768,'2021-03-19','19:35:55','NO',012);

INSERT INTO `E_V`(`CODEXCURSION`,`DNI`) VALUES
(34567,'56712367K'),
(57849,'45698610P'),
(63892,'85903261Q'),
(89506,'67823956C'),
(35768,'91758124R');

INSERT INTO `ALOJAMIENTO`(`CODALOJAMIENTO`,`CATEGORIA`,`CAPACIDAD`,`CODPN`) VALUES
(011,'HOTEL',45,01),
(012,'CAMPING',155,02),
(013,'ALBERGUE',76,03);

INSERT INTO `COMUNIDADAUTONOMA`(`CODCA`,`NOMBRE`,`ORGRESPONSABLE`) VALUES
(117,'ARAGON','MEDIO AMBIENTE'),
(118,'CATALUNYA','TURISMO'),
(119,'LA RIOJA','INTERIO'),
(120,'PAIS VASCO','TURISMO');

 INSERT INTO `A_V`(`CODALOJAMIENTO`,`DNI`,`FECHAINICIO`,`FECHAFIN`) VALUES
(011,'56712367K','2022-11-24','2022-11-27'),
(012,'45698610P','2020-02-10','2020-02-16'),
(013,'85903261Q','2023-01-06','2023-01-11'),
(011,'67823956C','2018-04-19','2018-04-23'),
(012,'91758124R','2021-03-18','2021-03-26');

INSERT INTO `ENTRADA`(`CODENTRADA`,`CODPN`) VALUES
(345,215),
(346,217),
(347,223),
(348,215),
(349,242);

INSERT INTO `PARQUENATURAL`(`CODPN`,`NOMBRE`,`FECHADECLARACION`) VALUES
(215,'ORDESA','1969-03-06'),
(217,'AIGÜESTORTES','1977-05-11'),
(223,'EL VIÑEDO','2000-09-12'),
(242,'URDABAI','1984-01-01');


INSERT INTO `CA_PN`(`CODCA`,`CODPN`,`SUPERFICIE`) VALUES
(117,215,15696),
(118,217,15681),
(119,223,9347),
(120,242,11247);


INSERT INTO `ESPECIE`(`CODESPECIE`,`NOMBRECIENTIFICO`,`NOMBREVULGAR`) VALUES
(01125,'Gyps fulvus','BUITRE LEONADO'),
(00746,'Galemys pyrenaicus','DESMAN IBERICO'),
(01139,'Falco peregrinus','HALCÓN PEREGRINO'),
(01065,'Anser anser','OCA COMÚN'),
(11012,'Vitis viniferas','VID'),
(11327,'Quercus robur','ROBLE COMÚN'),
(11389,'Fagus sylvatica','HAYA COMÚN'),
(11332,'Quercus suber','ALCORNOQUE COMÚN'),
(20347,'GRANITO','GRANITO'),
(20498,'ARCILLA','ARCILLA'),
(20579,'Cinabrio','CINABRIO'),
(20368,'PIZARRA','PIZARRA');

INSERT INTO `ANIMAL`(`CODESPECIE`,`ALIMENTACION`,`PERIODOCELO`) VALUES
(01125,'CARROÑERO','20 DIAS'),
(00746,'INSECTOS','7 DIAS'),
(01139,'PEQUEÑOS MAMIFEROS','15 DIAS'),
(01065,'HIERBAS Y BULBOS','5 DIAS');


INSERT INTO `VEGETAL`(`CODESPECIE`,`FLORACION`,`PERIODOFLORACION`) VALUES
(11012,'VERANO','45 DIAS'),
(11327,'PRIMAVERA','15 DIAS'),
(11389,'PRIMAVERA','67 DÍAS'),
(11332,'PRIMAVERA','36 DIAS');

INSERT INTO `MINERAL`(`CODESPECIE`,`TIPO`) VALUES
(20347,'IGNEA'),
(20498,'SEDIMENTARIA'),
(20579,'SULFUROS'),
(20368,'IGNEA Y ARCILLOSA');

INSERT INTO `AREA`(`NOMBREA`,`EXTENSION`,`CODPN`) VALUES
('PIRINEICA ORIENTAL',32300,215),
('PIRINEICA OCCIDENTAL',47200,217),
('ALTA RIOJA',35678,223),
('VEGA INTERIOR',36792,242);

INSERT INTO `E_A`(`CODESPECIE`,`NOMBREA`,`CANTIDIVIDUOS`) VALUES
(01125,'PIRINEICA ORIENTAL','943'),
(00746,'PIRINEICA OCCIDENTAL','34598'),
(01139,'VEGA INTERIOR','1875'),
(01065,'ALTA RIOJA','2554'),
(11012,'ALTA RIOJA','110762'),
(11327,'PIRINEICA OCCIDENTAL','14582'),
(11389,'PIRINEICA ORIENTAL','23796'),
(11332,'VEGA INTERIOR','24867'),
(20347,'PIRINEICA OCCIDENTAL',null),
(20498,'ALTA RIOJA',null),
(20579,'VEGA INTERIOR',null),
(20368,'PIRINEICA ORIENTAL',null);

INSERT INTO `PERSONAL`(`DNI`,`NSS`,`NOMBRE`,`DIRECCION`,`TFNODOMICILIO`,`TFNMOVIL`,`SUELDO`,`CODPN`) VALUES
('46873691L',577491994,'JOAQUIN','C/ ALMORAVÍ 32',NULL,768936748,45000,215),
('56729412J',136761604,'RAQUEL','C/ CALVARIO 15',956758105,675891248,39500,217),
('28758901T',545821204,'AREVALO','C/ ESTUARDO 117',972364756,622875934,48937,223),
('38857611T',303263777,'ALMA','C/ DEL SUSPIRO 65',946273911,729857365,43765,242),
('37581958Y',036483611,'DIONISIO','C/ BOLADORDO 75 B',938754829,768467124,31000,215),
('42858105H',002588599,'GERARDO','C/ VALENCIA 34',955758914,675891243,28300,217),
('47919587F',525893929,'AMAIA','C/ LOGROÑO 34',NULL,622875937,33000,223),
('34657878V',585429948,'UNAI','C/ GASTEIZ 85',944758195,729857363,30900,242),
('43678131H',527982932,'LAIA','C/ MONTSERRAT 32',930581275,768467122,34879,215),
('45678124C',426944728,'JULIA','C/ HAYA 35',955188176,675891241,33467,217),
('39816580Z',545261093,'MONICA','C/ ARITZA 55',978957291,622875936,31876,223),
('47891839M',417929708,'ARANTXA','C/ BILBO 62',null,729857368,32567,242),
('41857195K',319682377,'CLARA','C/ ASTURIAS 56',936492863,768467127,56700,215),
('39867285T',387449789,'AGUSTIN','C/ EBRO 21',NULL,675891246,54890,217),
('37986928V',262424168,'ROBERTO','C/ BADAJOZ 65',978758931,622875936,57500,223),
('46382958R',585179183,'MIREIA','C/ GETXO 15',null,729857361,55400,242);

INSERT INTO `CONSERVADOR`(`DNI`,`TAREA`,`NOMBREA`) VALUES
('46873691L','MANTENMIENTO DE ANIMALES','PIRINEICA ORIENTAL'),
('56729412J','CONSERVACIÓN VEGETAL','PIRINEICA OCCIDENTAL'),
('28758901T','SUPERVISION DE ESPECIES','ALTA RIOJA'),
('38857611T','ALIMENTACION','VEGA INTERIOR');

INSERT INTO `VIGILANTE`(`DNI`,`NOMBREA`) VALUES
('37581958Y','PIRINEICA ORIENTAL'),
('42858105H','PIRINEICA OCCIDENTAL'),
('47919587F','ALTA RIOJA'),
('34657878V','VEGA INTERIOR');

INSERT INTO `INVESTIGADOR`(`DNI`,`TITULACION`) VALUES
('43678131H','BIOLOGA'),
('45678124C','GEOLOGA'),
('39816580Z','ENOLOGA'),
('47891839M','FORESTAL');

INSERT INTO `GESTOR`(`DNI`,`CODENTRADA`) VALUES
('41857195K',345),
('39867285T',346),
('37986928V',347),
('46382958R',349);

INSERT INTO `VEHICULO`(`MATRICULA`,`TIPO`,`DNI`) VALUES
('2756MNN','RANGE ROVER','37581958Y'),
('3678KLM','PEUGEOT RIFTER','42858105H'),
('2875LFG','RENAULT CAPTUR','47919587F'),
('6572KHY','HYUNDAI STONIC','34657878V');

INSERT INTO `PROYECTO`(`CODPROY`,`PRESUPUESTO`,`FECHAINICIO`,`FECHAFIN`,`CODESPECIE`) VALUES
(1567,110345,'2020-04-04','2024-12-31',01125),
(1687,98765,'2022-06-18','2024-10-10',20347),
(1611,205879,'2021-02-28','2025-11-09',11012),
(1700,154679,'2023-01-01','2023-01-01',11332);

INSERT INTO `I_P`(`CODPROY`,`DNI`) VALUES
(1567,'43678131H'),
(1687,'45678124C'),
(1611,'39816580Z'),
(1611,'47891839M');

/*Se vuelven a activar las restricciones*/
SET FOREIGN_KEY_CHECKS = 1;

commit;

/* Crear una vista que saque los DNI y la fecha, de las personas que han realizado una excursión a pie y ejecútala.*/
Create view Visitantes_Pie as (select v.dni, x.fecha, x.apie as Excursion_a_pie
								from visitante v join e_v e on v.dni = e.dni
                                join excursion x on e.codexcursion = x.codexcursion
                                where x.apie = 'SI');

/*Creamos un select para ver la nueva vista creada.*/
SELECT * FROM patrimonio_natural.visitantes_pie;
